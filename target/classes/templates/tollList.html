<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.w3.org/1999/xhtml">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Tolls</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script>
    </script>
    <script type="text/javascript" charset="UTF-8" src="https://js.api.here.com/v3/3.1/mapsjs-core.js"></script>
    <script type="text/javascript" charset="UTF-8" src="https://js.api.here.com/v3/3.1/mapsjs-service.js"></script>
    <script type="text/javascript" charset="UTF-8" src="https://js.api.here.com/v3/3.1/mapsjs-mapevents.js"></script>
    <script type="text/javascript" charset="UTF-8" src="https://js.api.here.com/v3/3.1/mapsjs-ui.js"></script>
    <script type="text/javascript" charset="UTF-8" src="https://js.api.here.com/v3/3.1/mapsjs-clustering.js"></script>
    <script type="text/javascript" charset="UTF-8" src="https://js.api.here.com/v3/3.1/mapsjs-data.js"></script>
    <link rel="stylesheet" type="text/css" href="https://js.api.here.com/v3/3.1/mapsjs-ui.css"/>
    <!-- Custom Style sheet to try-->
    <link rel="stylesheet" type="text/css" href="dw.css"/>

    <link rel="stylesheet" type="text/css" href="style.css">
    <!--    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />-->
    <script src="include.js"></script>
</head>
<body>
<div class="navbar">
    <th:block xmlns:th="http://www.thymeleaf.org">
        <h1><a href="/tollsapp">Tolls of Macedonia</a></h1>
        <ul>
            <li><a href="/about">About</a></li>
            <li><a href="/tollList">See Tolls</a></li>
            <li><a href="/logout">Log out</a></li>
        </ul>
</div>
<div sec:authorize="isAuthenticated()">
    <div th:if="${#request.getRemoteUser()!=null}">
        Current user:
        <th:block th:text="${#request.getRemoteUser()}"/>
    </div>
</div>
<div class="row" STYLE="padding: 10px">
    <div class="columnT" th:each="toll : ${tolls}">
        <div class="card">
            <div class="container">
                <h2 th:text="${toll.getName()}"></h2>
                <p>Between Section
                    <th:block th:text="${toll.getSec1()}"/>
                    and Section
                    <th:block th:text="${toll.getSec2()}"/>
                </p>
                <h2>Prices:</h2>
                <p>
                    <th:block th:text="${toll.getIA()}"/>
                    MKD or
                    <th:block th:text="${toll.getIAE()}"/>
                    EUR
                </p>
                <p>
                    <th:block th:text="${toll.getIB()}"/>
                    MKD or
                    <th:block th:text="${toll.getIBE()}"/>
                    EUR
                </p>
                <p>
                    <th:block th:text="${toll.getII()}"/>
                    MKD or
                    <th:block th:text="${toll.getIIE()}"/>
                    EUR
                </p>
                <p>
                    <th:block th:text="${toll.getIII()}"/>
                    MKD or
                    <th:block th:text="${toll.getIIIE()}"/>
                    EUR
                </p>
                <p>
                    <th:block th:text="${toll.getIV()}"/>
                    MKD or
                    <th:block th:text="${toll.getIVE()}"/>
                    EUR
                </p>

                <div>
                    <button th:id="'myBtn'+${toll.id}" class="button">Show on map</button>

                    <!-- The Modal -->
                    <div th:id="'myModal'+${toll.id}" class="modal">

                        <!-- Modal content -->
                        <div class="modal-content" style="width: fit-content;margin: 15% auto;">
                            <span class="close">&times;</span>
                            <iframe th:src="${toll.getIframe()}" width="600" height="450" frameborder="0"
                                    style="border:0;" allowfullscreen="" aria-hidden="false" tabindex="0"></iframe>
                        </div>

                    </div>
                </div>
                <div sec:authorize="hasRole('ROLE_ADMIN')">
                    <form th:action="@{'/tollList/delete/{id}' (id=${toll.getId()})}" th:method="DELETE">
                        <button class="btn-danger" type="submit">Delete</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>


<script>
    // Get the modal
    let modal1 = document.getElementById("myModal1");
    let modal2 = document.getElementById("myModal2");
    let modal3 = document.getElementById("myModal3");
    let modal4 = document.getElementById("myModal4");
    let modal5 = document.getElementById("myModal5");
    let modal6 = document.getElementById("myModal6");
    let modal7 = document.getElementById("myModal7");
    let modal8 = document.getElementById("myModal8");
    let modal9 = document.getElementById("myModal9");
    let modal10 = document.getElementById("myModal10");
    let modal11 = document.getElementById("myModal11");
    let modal12 = document.getElementById("myModal12");
    let modal13 = document.getElementById("myModal13");
    let modal14 = document.getElementById("myModal14");
    let modal15 = document.getElementById("myModal15");
    let modal16 = document.getElementById("myModal16");
    let modal17 = document.getElementById("myModal17");
    let modal18 = document.getElementById("myModal18");

    // Get the button that opens the modal
    var btn1 = document.getElementById("myBtn1");
    var btn2 = document.getElementById("myBtn2");
    var btn3 = document.getElementById("myBtn3");
    var btn4 = document.getElementById("myBtn4");
    var btn5 = document.getElementById("myBtn5");
    var btn6 = document.getElementById("myBtn6");
    var btn7 = document.getElementById("myBtn7");
    var btn8 = document.getElementById("myBtn8");
    var btn9 = document.getElementById("myBtn9");
    var btn10 = document.getElementById("myBtn10");
    var btn11 = document.getElementById("myBtn11");
    var btn12 = document.getElementById("myBtn12");
    var btn13 = document.getElementById("myBtn13");
    var btn14 = document.getElementById("myBtn14");
    var btn15 = document.getElementById("myBtn15");
    var btn16 = document.getElementById("myBtn16");
    var btn17 = document.getElementById("myBtn17");
    var btn18 = document.getElementById("myBtn18");


    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks the button, open the modal
    btn1.onclick = function () {
        modal1.style.display = "block";
    }
    btn2.onclick = function () {
        modal2.style.display = "block";
    }
    btn3.onclick = function () {
        modal3.style.display = "block";
    }
    btn4.onclick = function () {
        modal4.style.display = "block";
    }
    btn5.onclick = function () {
        modal5.style.display = "block";
    }
    btn6.onclick = function () {
        modal6.style.display = "block";
    }
    btn7.onclick = function () {
        modal7.style.display = "block";
    }
    btn8.onclick = function () {
        modal8.style.display = "block";
    }
    btn9.onclick = function () {
        modal9.style.display = "block";
    }
    btn10.onclick = function () {
        modal10.style.display = "block";
    }
    btn11.onclick = function () {
        modal11.style.display = "block";
    }
    btn12.onclick = function () {
        modal12.style.display = "block";
    }
    btn13.onclick = function () {
        modal13.style.display = "block";
    }
    btn14.onclick = function () {
        modal14.style.display = "block";
    }
    btn15.onclick = function () {
        modal15.style.display = "block";
    }
    btn16.onclick = function () {
        modal16.style.display = "block";
    }
    btn17.onclick = function () {
        modal17.style.display = "block";
    }
    btn18.onclick = function () {
        modal18.style.display = "block";
    }

    // When the user clicks on <span> (x), close the modal
    span.onclick = function () {
        modal1.style.display = "none";
        modal2.style.display = "none";
        modal3.style.display = "none";
        modal4.style.display = "none";
        modal5.style.display = "none";
        modal6.style.display = "none";
        modal7.style.display = "none";
        modal8.style.display = "none";
        modal9.style.display = "none";
        modal10.style.display = "none";
        modal11.style.display = "none";
        modal12.style.display = "none";
        modal13.style.display = "none";
        modal14.style.display = "none";
        modal15.style.display = "none";
        modal16.style.display = "none";
        modal17.style.display = "none";
        modal18.style.display = "none";

    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function (event) {
        if (event.target == modal1) {
            modal1.style.display = "none";
        } else if (event.target == modal2) {
            modal2.style.display = "none";
        } else if (event.target == modal3) {
            modal3.style.display = "none";
        } else if (event.target == modal4) {
            modal4.style.display = "none";
        } else if (event.target == modal5) {
            modal5.style.display = "none";
        } else if (event.target == modal6) {
            modal6.style.display = "none";
        } else if (event.target == modal7) {
            modal7.style.display = "none";
        } else if (event.target == modal8) {
            modal8.style.display = "none";
        } else if (event.target == modal9) {
            modal9.style.display = "none";
        } else if (event.target == modal10) {
            modal10.style.display = "none";
        } else if (event.target == modal11) {
            modal11.style.display = "none";
        } else if (event.target == modal12) {
            modal12.style.display = "none";
        } else if (event.target == modal13) {
            modal13.style.display = "none";
        } else if (event.target == modal14) {
            modal14.style.display = "none";
        } else if (event.target == modal15) {
            modal15.style.display = "none";
        } else if (event.target == modal16) {
            modal16.style.display = "none";
        } else if (event.target == modal17) {
            modal17.style.display = "none";
        } else if (event.target == modal18) {
            modal18.style.display = "none";
        }
    }
</script>
</body>
</html>